@page "/{Index}/admin/"
@using KnowledgeMining.UI.Pages.Admin.Components
@using Microsoft.AspNetCore.Hosting
@using Microsoft.Extensions.Hosting
@using KnowledgeMining.UI.Services.Links
@using KnowledgeMining.UI.Helpers;

@inject ILinkGenerator LinkGenerator;
@inject IWebHostEnvironment HostEnvironment

@code {
    [Parameter]
    public string NavigateTo { get; set; }
}
<style>
    .mudcard {
        margin-bottom: 10px;
    }
    .mudcard:hover{
        background-color: rgba(128, 128, 128, 0.5);
    }
    .header, .subheader-text {
        text-align: center;
    }
    li {
        margin: 0 0 5px 0;
        list-style-type: circle;
    }
    .mud-table {
        width: 66%;
        margin: 0 auto 25px auto;
        padding: 10px 10px 10px 25px;
        border: solid 1px grey;

        border-radius: 10px;
        box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);
    }
    td > a {
        color: black;
        text-decoration: none !important;
    }
    .date-col {
        min-width: 175px;
    }
</style>

<PageTitle>@Localizer["ingestionErrorDocsHeader"]</PageTitle>
<MudContainer MaxWidth="MaxWidth.ExtraLarge" Class="mt-4">
   <h1 class="header">@Localizer["ingestionErrorDocsHeader"]</h1>
   <p class="subheader-text">@Localizer["ingestionErrorDocsSubHeader"]</p>
   @if (_documentListIsLoading)
    {
        <div class="record_divider">
            <MudSkeleton Animation="Animation.Wave" SkeletonType="SkeletonType.Rectangle" Height="100p" />
        </div>
    }
    else
    {
        <MudSimpleTable Class="mud-table">
            <thead>
                <tr>
                    <th class="date-col" title="@Localizer["dateFormat"]">@Localizer["lastModifiedOn"]</th>
                    <th class="doc-name-col">@Localizer["documentName"]</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var doc in _errorDocuments)
                {
                    <tr>
                        <td class="date-col" title="@Localizer["dateFormat"]">@GetLastModifiedDate(doc.LastModifiedOn)</td>
                        <td class="doc-name-col"><a href="@($"/{Index}/admin/{NavigateTo}{ToBase64(doc.Name)}")">@doc.Name</a></td>
                    </tr>
                }
            </tbody>
        </MudSimpleTable>
    }
</MudContainer>
